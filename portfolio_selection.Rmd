---
title: "Lazy Porfolio Selection"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r init}
# Load libraries
setwd("/Volumes/DATA/Github/LazyPortfolioAnalytics")
#

library(ggplot2) # for ggplot
library(scales) # for percent

# generate 
load("df_lazy.rda")
load("df_pareto_dd.rda")
load("df_pareto_pi.rda")
load("returns.rda")
```
## Introduction

The purpose of the Lazy Portfolio Analytics project is to provide the user with the information he or she needs to craft his or her passively managed retirement portfolio.  Very simply, these questions include:

1) Which lazy portfolio should I choose?
2) And which stock instruments should I pick?

I answered the first question by analyzing as many different lazy portfolios as I could find--18 to date.  Each is ranked according to risk and return metrics for various investment periods and ranked.  A rebalancing period of 1 year was assumed after studying the sensitivity of CAGR to various rebalance periods.

I answered the second question by looking at every ETF available on ETFdb.com, and ranking each according to cost and performance against the market.

The desired retirement portfolio is thus 

My motivations:
1) I know almost nothing about the investment world.  It's time to take control of personal finances.
2) I am relatively young and have a long investment outlook.  Every day I keep my head buried under the sand is one more day my money doesn't grow according to my own will.  
3) Through my random self-learnings about retirement portfolios on Google, I found that I was dissatisfied with most of what I read because of the lack of rigor and thoroughness in the analysis.  But I also just have a heard time taking other people at their word when it comes to my money. 
I have been dissatisfied with most 

Very simply, this study compares the risk and return performance of 18 lazy portfolios evaluated at 1, 3, 5, 7, and 9 year timeframes.  There are many different risk metrics available, but my favorite is maximum drawdown (MDD), which quantifies the largest single loss a portoflio suffers in value from peak to trough (before a new peak is achieved).  This is a particularly 



```{r plot.code, echo=FALSE, fig.width = 11}
df.lazy.subset = subset(df.lazy,Rebalance.Period == "Yearly")

df.pareto.dd.subset.1 =  subset(df.pareto.dd,.level == "1")

plot.dd = ggplot() + 
          geom_point(data = df.lazy.subset,aes(x = as.numeric(levels(DD))[DD],y = as.numeric(CAGR)),colour = "Gray",size = 2) +
          geom_point(data = df.pareto.dd.subset.1,aes(x = as.numeric(levels(DD))[DD],y = as.numeric(CAGR),colour = Name),size = 2) + 
          theme_dark() +
          scale_y_continuous(labels = percent) + 
          scale_x_continuous(labels = percent, trans = "reverse") +
          labs(title = "CAGR vs Downside Deviation",
            x = "Downside Deviation at rf = 0",
            y = "CAGR") + 
          facet_grid(. ~ Timeframe, scales = "free") +
          theme(legend.title=element_blank(),legend.position = "bottom")


df.pareto.pi.subset.1 =  subset(df.pareto.pi,Rebalance.Period == "Yearly" & .level == "1")

plot.pi = ggplot() + 
          geom_point(data = df.lazy.subset,aes(x = as.numeric(levels(PI))[PI],y = as.numeric(CAGR)),colour = "Gray",size = 2) +
          geom_point(data = df.pareto.pi.subset.1,aes(x = as.numeric(levels(PI))[PI],y = as.numeric(CAGR),colour = Name),size = 2) + 
          theme_dark() +
          scale_y_continuous(labels = percent) + 
          scale_x_continuous(labels = percent, trans = "reverse") +
          labs(title = "CAGR vs Pain Index",
            x = "Pain Index",
            y = "CAGR") + 
          facet_grid(. ~ Timeframe, scales = "free") +
          theme(legend.title=element_blank(),legend.position = "bottom")

plot.dd

plot.pi



```
